BSRR:端口清除/设置寄存器

为啥要把清除写在置位的前面，因为BSRR寄存器高16位是用来清除端口的引脚为低电平，低16位用来设置端口的引脚为高电平。我们是习惯将高位写在左边，低位写在右边，也就是从左到右是31-0。所以这样写便于记忆！

写入：只能以字（16位）的形式写入。如GPIOB->BSRR=(uint16_t)0x00;

功能：将高16位中的某一位写入“1”，将会清除对应引脚为“0”；

    将低16位中的某一位写入“1”，将会设置对应引脚为“1”；

    写入“0”不会对引脚产生影响。


BRR:端口清除寄存器

高16位为无效位（保留），低16位同BSRR寄存器的高16位功能一样。

写入：只能以字（16位）的形式写入。如GPIOB->BRR=(uint16_t)0x00;

功能：将高16位无效位（保留）；

将低16位中的某一位写入“1”，将会设置对应引脚为“0”；

写入“0”不会对引脚产生影响。
每组GPIO端口的寄存器包括：

一个端口模式寄存器（GPIOx_MODER）
一个端口输出类型寄存器(GPIOx_OTYPER)
一个端口输出速度寄存器（GPIOx_OSPEEDR)
一个端口上拉下拉寄存器（GPIOx_PUPDR)
一个端口输入数据寄存器（GPIOx_IDR）
一个端口输出数据寄存器（GPIOx_ODR)
一个端口置位/复位寄存器（GPIOx_BSRR)
一个端口配置锁存寄存器（GPIOx_LCKR)
两个复位功能寄存器（低位GPIOx_AFRL & GPIOx_AFRH)
GPIOB->CRL&=0X0FFFFFFF;
GPIOB->CRL|=(u32) 8<<28;

GPIOB->CRL&=0X0FFFFFFF;
GPIOB->CRL|=0x80000000;

#define SDA_IN()  {GPIOB->CRL&=0X0FFFFFFF;GPIOB->CRL|=(u32)8<<28;} //宏定义，PB7：上拉/下拉输入模式
#define SDA_OUT() {GPIOB->CRL&=0X0FFFFFFF;GPIOB->CRL|=(u32)3<<28;} //宏定义，PB7：50MHz推挽输出模式

//其中GPIOB->CRL&=0X0FFFFFFF;表示PB7先清零
//其中(u32)8<<28表示

0000 0000 0000 0000 0000 0000 0000 1000中的1左移28位（4*7）变为
1000 0000 0000 0000 0000 0000 0000 0000
1000 0000 0000 0000 0000 0000 0000 0000

要设置GPIOA的0、5、10、11为高，而保持其它I/O口不变，则
GPIOA->BSRR = 0x0C21（0000 1100 0010 0001）；
要设置D0、D5、D10、D11为高，而保持其它I/O口不变，只需一行语句： 
  GPIOD->BSRR = 0x0C21；// 使用规则一 

2）要设置D1、D3、D14、D15为低，而保持其它I/O口不变，只需一行语句： 
  GPIOD->BRR = 0xC00A；// 使用规则三 

3）要同时设置D0、D5、D10、D11为高，设置D1、D3、D14、D15为低，而保持其它I/O口不变，也只需一行语句： 
  GPIOD->BSRR = 0xC00A0C21；// 使用规则一和规则二 
0xC00A0C21:1100 0000 0000 1010 0000 1100 0010 0001